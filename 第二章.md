#### 第二章：HTML中的JavaScript

1. \<script>元素
   + 将JavaScript插入html的方法是使用\<script>元素

   + 八个属性
     1. async（可选）：表示应该立即开始下载脚本，但不能阻止其它页面动作，只对外部脚本文件有效。
     1. charse（可选）：使用src属性指定的代码字符集。（大多数浏览器不在乎他的值，所有很少使用）
     1. crossorigin（可选）：配置相关请求的CORS设置，默认不使用CORS。
     1. defer（可选）：表示脚本可以延迟到文档完全被解析和显示之后再执行，只对外部文件有效。
     1. intergrity（可选）：允许比对接收到的资源和指定的加密签名以子资源完整。
     1. language（废弃）：最初用于表示代码块中的脚本语言。（大多数浏览器都忽略这个属性）
     1. src（可选）：表示包含要执行的代码的外部文件。
     1. type（可选）：代替language，表示代码块中脚本语言的内容类型。
     
   + 使用方式：

     + 直接在网页中嵌入代码，代码会被从上到下解释。
       + 内嵌时注意\</script>的转义
     + 通过它在网页中包含外部JavaScript文件。
       + 必须使用src属性，属性为一个URL,指向包含的JavaScript代码的文件。
       + 解释外部JavaScript文件时，页面也会阻塞。
       + 浏览器不会检查所包含JavaScript文件的扩展名.
       + 使用了src属性的scipt标签不能再在其中包含内置代码，会被忽略。
       + 浏览器在解析资源时，会向src属性指定的路径发送一个GET请求，这个初始请求不受浏览器同源策略限制，但返回并被执行的JavaScript则受限制。
       + 可用intergrity属性防范文件的安全性。

   + 标签位置

     + 放在head标签内，意味着必须把所有JavaScript代码都下载。解析和解释完成后，才能开始渲染页面，这回导致页面渲染的明显延迟
     + 将JavaScript引用都放在body元素中，页面会在处理JavaScript代码之前完成渲染。

   + 推迟执行脚本

     + defer属性：表示脚本在执行的时候不会改变页面的结构，会被延迟到整个也买你都解析完毕后再运行，相当于告诉浏览器立即下载，延迟执行。
     + 实际中不一定会按顺序执行或者再DOMContentLoaded事件之前执行，因此最好只包含一个这样的脚本。

   + 异步执行脚本：

     + async属性：只适用于外部脚本，告诉浏览器立即下载，但不保证按照他们出现的次序执行

   + 动态加载脚本：

     ```javascript
     let script = document.createElement('script');
     script.src = 'gibberish.js';
     documnet.head.appendChild(script);
     //在把HTMLElement元素添加到DOM且执行这段代码之前不会发送请求，默认添加了asyns属性，不是所有浏览器都支持async，所以加上script.async = false这句话，这种方式严重影响性能，可在文档头部显示声明他们，<link rel="preload" href="gibberish.js"/>
     ```

   + XHTML中的变化

     + 添加type
     + 注意符号

   + 废弃的语法：

     + 对不支持JavaScript的浏览器隐藏代码

     ```javascript
     <script><--
     	function sayHi(){
         console.log('hi')
     }
     --><script/>
     ```

2. 行内代码与外部文件

   + 推荐外部文件

   			 1.可维护性：用一个目录来保存所有JavaScript代码，更容易维护

​				2.缓存：两个页面用同一个文件，只需下载一次

​				3.适应未来：放到外部文件中，不用考虑浏览器适应

3. 文档模式
   + 混杂模式
   + 标准模式
4. \<noscript>元素
   + 显示内容包括
     + 浏览器不支持脚本
     + 浏览器对脚本的支持被关闭
5. 小结
   +  要包含外部 JavaScript 文件，必须将 src 属性设置为要包含文件的 URL。文件可以跟网页在同 一台服务器上，也可以位于完全不同的域。
   + 所有<script>元素会依照它们在网页中出现的次序被解释。在不使用 defer 和 async 属性的 情况下，包含在<script>元素中的代码必须严格按次序解释。
   +  对不推迟执行的脚本，浏览器必须解释完位于<script>元素中的代码，然后才能继续渲染页面 的剩余部分。为此，通常应该把<script>元素放到页面末尾，介于主内容之后及</body>标签 之前。
   +  可以使用 defer 属性把脚本推迟到文档渲染完毕后再执行。推迟的脚本原则上按照它们被列出 的次序执行。
   +  可以使用 async 属性表示脚本不需要等待其他脚本，同时也不阻塞文档渲染，即异步加载。异 步脚本不能保证按照它们在页面中出现的次序执行。
   +  通过使用<noscript>元素，可以指定在浏览器不支持脚本时显示的内容。如果浏览器支持并启用脚本，则<noscript>元素中的任何内容都不会被渲染。